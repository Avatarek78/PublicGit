<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0061)https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                    
                                    <title>Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)</title>
                        <meta http-equiv="X-UA-Compatible" content="IE=edge">
                <link rel="shortcut icon" href="https://rozvoj.fit.cvut.cz/resources/icons/xwiki/favicon.ico">
        <link rel="icon" href="https://rozvoj.fit.cvut.cz/resources/icons/xwiki/favicon16.png" type="image/png">
        <link rel="icon" href="https://rozvoj.fit.cvut.cz/resources/icons/xwiki/favicon.svg" type="image/svg+xml">
        <link rel="apple-touch-icon" href="https://rozvoj.fit.cvut.cz/resources/icons/xwiki/favicon144.png">
                <meta http-equiv="Content-Script-Type" content="text/javascript">
                        <meta http-equiv="imagetoolbar" content="no">
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="https://rozvoj.fit.cvut.cz/edit/Main/problemy-s-certifikaty-v-jave">
                    <link rel="canonical" href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave">
                            <meta name="document" content="Main.problemy-s-certifikaty-v-jave">
    <meta name="wiki" content="xwiki">
    <meta name="space" content="Main">
    <meta name="page" content="problemy-s-certifikaty-v-jave">
    <meta name="version" content="2.1">
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Main/pages/problemy-s-certifikaty-v-jave">
    <meta name="form_token" content="y02C9bjNriYfoUOkDx9uaQ">
                <meta name="gwt:property" content="locale=en">
                <meta name="revisit-after" content="7 days">
<meta name="description" content="Problémy s certifikáty v Javě">
<meta name="keywords" content="wiki Java návod">
<meta name="distribution" content="GLOBAL">
<meta name="rating" content="General">
<meta name="author" content="Jakub Jirůtka">
<meta http-equiv="reply-to" content="">
<meta name="language" content="en">
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="https://rozvoj.fit.cvut.cz/Main/WebRss?xpage=rdf">

                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
<link href="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/style.css" rel="stylesheet" type="text/css" media="all">
<link href="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/print.css" rel="stylesheet" type="text/css" media="print">
        <!--[if IE]>
  <link href="/skin/skins/colibri/ie%2Dall.css?colorTheme=ColorThemes.CVUT" rel="stylesheet" type="text/css" />
<![endif]-->
    
  <link rel="stylesheet" type="text/css" href="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/Style"><link rel="stylesheet" type="text/css" href="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/Settings">
  <link rel="stylesheet" type="text/css" href="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/xwiki-min.css"><link rel="stylesheet" type="text/css" href="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/searchSuggest.css"><link rel="stylesheet" type="text/css" href="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/wiki.css"><link rel="stylesheet" type="text/css" href="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/tags.css"><link rel="stylesheet" type="text/css" href="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/comments.css"><link rel="stylesheet" type="text/css" href="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/upload.css"><link rel="stylesheet" type="text/css" href="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/attachments.css"><link rel="stylesheet" type="text/css" href="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/pagination.css">

    



  
  
                                                                                                                                                                                                                                      
    
      
    <script type="text/javascript" async="" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/ga.js"></script><script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/require.js"></script><style type="text/css"></style>
<script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/prototype.js"></script>
<script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/effects.js" defer="defer"></script>
<script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/xwiki-min.js"></script>
<script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/searchSuggest.js" defer="defer"></script>
<script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/tags.js" defer="defer"></script>
<script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/comments.js" defer="defer"></script>
<script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/upload.js" defer="defer"></script>
<script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/attachments.js" defer="defer"></script>

    <script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/GoogleAnalyticsCode" defer="defer"></script>
<script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/Script" defer="defer"></script>
<script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/Settings(1)" defer="defer"></script>


<script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/compatibility.js" defer="defer"></script>
<script type="text/javascript" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/markerScript.js" defer="defer"></script>
<script type="text/javascript">
// <![CDATA[
require.config({
  baseUrl: '/',
    paths: { 'jquery': "/resources/js/amd/jquery" },
  map: {
    '*': { 'jquery': 'jQueryNoConflict' },
    'jQueryNoConflict': { 'jquery': 'jquery' }
  }
});
define('jQueryNoConflict', ['jquery'], function($) { $.noConflict(); return $; });
XWiki.webapppath = "";
XWiki.servletpath = "";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Main";
XWiki.currentPage = "problemy-s-certifikaty-v-jave";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "markdown/1.1";
XWiki.docvariant = "";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
XWiki.hasRenderer = false;
window.docviewurl = "/Main/problemy%2Ds%2Dcertifikaty%2Dv%2Djave";
window.docediturl = "/edit/Main/problemy%2Ds%2Dcertifikaty%2Dv%2Djave";
window.docsaveurl = "/save/Main/problemy%2Ds%2Dcertifikaty%2Dv%2Djave";
window.docgeturl = "/get/Main/problemy%2Ds%2Dcertifikaty%2Dv%2Djave";
// ]]>
</script>

  </head>
  <body id="body" class="wiki-xwiki space-Main viewbody hideright">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<div class="gradientfilterIE"></div>
<div class="componentcontainer">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://rozvoj.fit.cvut.cz/login/XWiki/XWikiLogin?xredirect=%2FMain%2Fproblemy%252Ds%252Dcertifikaty%252Dv%252Djave"><strong>Log-in</strong></a>
  </div>
  </div>
<div class="leftmenu">
  <div id="tmMainWiki" class="tmMainWiki topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="https://rozvoj.fit.cvut.cz/Main/WebHome"><strong>Home</strong></a>
    <span class="menuarrow">▼</span><span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
        <span class="submenuitem "><a href="https://rozvoj.fit.cvut.cz/WikiManager/WebHome" id="tmWikiIndex" class="tmWikiIndex">Wiki Index</a></span>
      <span class="submenuitem "><a href="https://rozvoj.fit.cvut.cz/Main/AllDocs" id="tmWikiDocumentIndex" class="tmWikiDocumentIndex">Document Index</a></span>
        <span class="submenuitem "><a href="https://rozvoj.fit.cvut.cz/Main/UserDirectory" id="tmMainUserIndex" class="tmMainUserIndex">User Index</a></span>
    </span></div>
<div class="topmenuentry"><span class="separator">»</span></div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
      <span class="tmetype">Space: </span><a class="tme hastype" href="https://rozvoj.fit.cvut.cz/Main/WebHome"><strong>Main</strong></a>
    <span class="menuarrow">▼</span><span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
              <span class="submenuitem "><a href="https://rozvoj.fit.cvut.cz/Main/SpaceIndex?space=Main" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
      </span></div>
<div class="topmenuentry"><span class="separator">»</span></div>
  <div id="tmPage" class="tmPage topmenuentry hasIcon">
      <span class="tmetype">Page: </span><a class="tme hastype" href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave"><strong>problemy-s-certifikaty-v-jave</strong></a>
  </div>
</div>
</div>
</div>

  </div>
 <div id="headerglobal" class="layoutsection">
<div class="minwidthb"></div>
  <div id="company">
  <div id="companylogo">
    <a href="https://rozvoj.fit.cvut.cz/Main/WebHome" title="Home" rel="home">
    <img src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/logo.png" alt="Wiki Logo">
    </a>
  </div>   </div>   <div id="globallinks">
        <form action="https://rozvoj.fit.cvut.cz/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="search..." size="15" autocomplete="off" placeholder="search..."><input class="button" type="image" value="Go" alt="Go" src="./Problémy s certifikáty v Javě (Main.problemy-s-certifikaty-v-jave)_files/search.png">
      </div>
    </form>
      </div>   <div class="clearfloats"></div>
  </div> 

<div class="contenthideright" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
          <div class="main layoutsubsection">
      <div id="contentmenu" class="actionmenu floating-menu" style="position: fixed; top: 0px; left: 225px; width: 1333px;">
    <div class="gradientfilterIE"></div>
<div class="componentcontainer">
<strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
<div class="topmenuentry hasIcon" id="tmAnnotations"><a class="tme" href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave#Comments"><strong>Annotations</strong></a></div></div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="menuarrow">▼</span><span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
    <span class="submenuitem "><a href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave?xpage=pdfoptions&amp;qs=" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
    <span class="submenuitem "><a href="https://rozvoj.fit.cvut.cz/export/Main/problemy-s-certifikaty-v-jave?format=rtf" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="https://rozvoj.fit.cvut.cz/export/Main/problemy-s-certifikaty-v-jave?format=html" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>
  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="menuarrow">▼</span><span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave?xpage=print" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
  <span class="submenuitem "><a href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave?viewer=code" id="tmViewSource" class="tmViewSource">View Source</a></span>
  </span></div>
  </div>
</div>
    </div><div style="left: 225px; top: 76px; height: 23px;"></div>
    <div id="mainContentArea">
  
   <div id="hierarchy">
                  <span class="current">Problémy s certifikáty v Javě</span>
          </div>

          
<div id="document-title"><h1>Problémy s certifikáty v Javě</h1></div>

                              <div id="document-info">
    <div class="xdocLastModification">       Last modified by <span class="wikilink"><a href="https://rozvoj.fit.cvut.cz/XWiki/jirutjak">Jakub Jirůtka</a></span> on 2013-11-08, 20:34
    </div>
    <div>
                      <span id="commentsshortcut"><a href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave#comments">Comments</a> <span class="itemCount">(0)</span></span>
               <span class="separator">·</span>         <span id="annotationsshortcut"><a href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave#annotations">Annotations</a> <span class="itemCount">(0)</span></span>
               <span class="separator">·</span>         <span id="attachmentsshortcut"><a href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave#attachments">Attachments</a> <span class="itemCount">(0)</span></span>
               <span class="separator">·</span>         <span id="historyshortcut"><a href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave#history">History</a></span>
               <span class="separator">·</span>         <span id="informationshortcut"><a href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave#information">Information</a></span>
          </div>
    <div class="clearfloats"></div>
  </div>

<div id="xwikicontent">
<p>Java (resp. <span class="wikiexternallink"><a href="http://en.wikipedia.org/wiki/Java_virtual_machine">JVM</a></span>) nevyužívá systémové úložiště certifikátů, jako například webové prohlížeče, ale má separátní správu certifikátů. To mimo jiné znamená, že má také vlastní výchozí sadu důvěryhodných <span class="wikiexternallink"><a href="http://en.wikipedia.org/wiki/Root_certificate">kořenových certifikátů</a></span>.</p><p>Certifikáty ukládají do binárního, šifrovaného souboru ve formátu JKS. Pro práci s&nbsp;ním slouží nástroj <span class="wikiexternallink"><a href="http://ketan.lithiumfox.com/doku.php/keytool">keytool</a></span>.</p><h2 id="HProblE9mysned16Fv11BryhodnFDmicertifikE1ty-232"><span>Problémy s nedůvěryhodnými certifikáty</span></h2><p>Java vám standardně nedovolí navázat SSL/TLS spojení na server, který nemá platný a&nbsp;_důvěryhodný_ certifikát. Tady je nutné upozornit, že „platný“ a „důvěryhodný“ není totéž, jde o&nbsp;dvě rozdílná kritéria. Jednoduše řečeno, certifikát lze prohlásit za platný, když <em>není</em> expirovaný (tj. v něm uvedená doba platnosti ještě neuplynula) ani <span class="wikiexternallink"><a href="http://en.wikipedia.org/wiki/Revocation_list">revokovaný</a></span>. Jedná se o objektivní kritérium. Oproti tomu <em>důvěryhodnost</em> certifikátu je relativní a závisí na <em>vašem</em> „nastavení“. To, že certifikát <em>není</em> důvěryhodný, znamená, že není obsažen ve vaší sadě důvěryhodných certifikátů, ani není podepsaný žádnou certifikační autoritou, jejíž certifikát máte ve své sadě důvěryhodných certifikátů.</p><p>Na produkčních serverech se zpravidla používají certifikáty podepsané důvěryhodnou certifikační autoritou (CA). Tedy takovou, která je buď sama kořenovou CA, jejíž certifikát je obsažen ve výchozí sadě důvěryhodných certifikátů, nebo je takovou (tranzitivně) podepsaná. V&nbsp;takových případech by tedy mělo vše fungovat automaticky a pokud ne, tak bývá chyba na straně příslušného serveru.</p><p>Až na výjimky jsou však důvěryhodné CA komerční a vydávání certifikátů zpoplatňují. Serverové certifikáty také musí být vázané na <em>veřejné</em> doménové jméno nebo IP adresu. Z&nbsp;těchto důvodů se na různé testovací a vývojové servery, na které běžní uživatelé nepřistupují, typicky nedávají certifikáty podepsané CA. A&nbsp;tam právě narazíte na problém. Zatímco webový prohlížeč zobrazí jen upozornění, které můžete ignorovat, tak Java vám připojení odmítne.</p><p>Problém lze řešit dvěma způsoby – obejitím kontroly certifikátů, nebo přidáním dotyčných certifikátů mezi důvěryhodné. První způsob velmi nedoporučuji, neb tím podkopete bezpečnostní princip TLS/SSL certifikátů. Druhý způsob popíší na následujících řádcích.</p><h2 id="HP159idE1nEDcertifikE1tudoexistujEDcEDhoFAlo17Ei161t11B28TrustStore29-232"><span>Přidání certifikátu do existujícího úložiště (TrustStore)</span></h2><p>V&nbsp;typickém případě, kdy potřebujete pouze zprovoznit HTTPS spojení na server, který nemá důvěryhodný certifikát, je nejlepší převzít výchozí úložiště certifikátů (TrustStore) a jen do něj doplnit potřebné certifikáty navíc.</p><p>Výchozí úložiště dodávané společně s&nbsp;JRE (Java Runtime Environment), resp. JDK, se nachází v&nbsp;<span class="box"><span class="code"><span style="color: #BC7A00; ">${</span>JRE_HOME<span style="color: #BC7A00; ">}</span>/lib/security/cacerts</span></span>. Konkrétní umístění adresáře <span class="box"><span class="code">JRE_HOME</span></span> závisí na platformě:</p><ul><li><strong>OS X:</strong> <span class="box"><span class="code">/<span style="color: #008000; ">Library</span>/<span style="color: #008000; ">Java</span>/JavaVirtualMachines<span style="color: #666666; ">/&lt;</span>verze<span style="color: #666666; ">&gt;</span><span style="color: #008000; ">.</span>jdk/<span style="color: #008000; ">Contents</span>/<span style="color: #008000; ">Home</span><span style="color: #666666; ">/</span></span></span></li><li><strong>Windows:</strong> <span class="box"><span class="code"><span style="color: #666666; ">\</span>Program Files<span style="color: #666666; ">\</span><span style="color: #008000; ">Java</span><span style="color: #666666; ">\</span>jre<span style="color: #666666; ">&lt;</span>verze<span style="color: #666666; ">&gt;\</span></span></span></li><li><strong>Ubuntu/Debian:</strong> <span class="box"><span class="code">/usr/lib/jvm<span style="color: #666666; ">/&lt;</span>verze<span style="color: #666666; ">&gt;/</span>jre<span style="color: #666666; ">/</span></span></span></li></ul><p>Nedoporučuji však přidávat certifikáty <em>přímo</em> sem, neboť provedené změny se po aktualizaci JRE/JDK přepíší. Místo toho si vytvořte kopii a tu dále upravujte.</p><ol><li><p>Připravte si certifikát ve formátu PEM, který chcete importovat do úložiště.</p></li><li><p>Zkopírujte výchozí truststore z&nbsp;adresáře JRE např. do svého domovského adresáře:</p><div class="box"><div class="code">cp <span style="font-weight: bold; color: #008000; ">${</span><span style="color: #19177C; ">JRE_HOME</span><span style="font-weight: bold; color: #008000; ">}</span>/lib/security/cacerts ~/.truststore</div></div></li><li><p>Následně do něj importujte připravený certifikát <span class="box"><span class="code">example.org.pem</span></span>:</p><div class="box"><div class="code">keytool -import -keystore ~/.cacerts -storepass changeit -alias example.org -file example.org.pem</div></div><p>Argument <em>alias</em> může obsahovat libovolný název, doporučuji odpovídající doméně. Heslo <span class="box"><span class="code">changeit</span></span> je všude stejné.</p></li><li><p>Nakonec je potřeba JVM nastavit, aby použila vaše úložiště namísto výchozího (viz dále).</p></li></ol><h2 id="HPou17EitEDvlastnEDhoFAlo17Ei161t11BcertifikE1t16F-232"><span>Použití vlastního úložiště certifikátů</span></h2><p>Úložiště certifikátů se nastavuje při spuštění <span class="box"><span class="code">java</span></span> procesu pomocí atributu <span class="box"><span class="code">javax.net.ssl.trustStore</span></span>, který obsahuje cestu k JKS&nbsp;souboru (např. <span class="box"><span class="code">java <span style="color: #666666; ">-</span>Djavax.net.ssl.trustStore<span style="color: #666666; ">=/</span>path<span style="color: #666666; ">/</span>to<span style="color: #666666; ">/</span>truststore</span></span>).</p><h3 id="HTomcatnaLinuxu-232"><span>Tomcat na Linuxu</span></h3><ol><li><p>Otevřete soubor <span class="box"><span class="code"><span style="color: #666666; ">/</span>etc<span style="color: #666666; ">/</span><span style="font-weight: bold; color: #008000; ">default</span><span style="color: #666666; ">/</span>tomcat7</span></span> (Ubuntu/Debian) nebo <span class="box"><span class="code"><span style="color: #666666; ">/</span>etc<span style="color: #666666; ">/</span>conf.d<span style="color: #666666; ">/</span>tomcat<span style="color: #666666; ">-</span><span style="color: #666666; ">7</span></span></span> (Gentoo) v&nbsp;textovém editoru.</p></li><li><p>Do proměnné <span class="box"><span class="code">JAVA_OPTS</span></span> přidejte <span class="box"><span class="code"><span style="color: #666666; ">-</span>Djavax.net.ssl.trustStore<span style="color: #666666; ">=/</span>path<span style="color: #666666; ">/</span>to<span style="color: #666666; ">/</span>truststore</span></span>.</p></li><li><p>Změny uložte a restartujte Tomcat.</p></li></ol><h3 id="HTomcatnaOSX-232"><span>Tomcat na OS X</span></h3><p>Spouštíte-li Tomcat přímo, pomocí skriptu <span class="box"><span class="code">startup.sh</span></span>, proveďte následující kroky. Postup předpokládá, že máte Tomcat nainstalovaný přes <span class="wikiexternallink"><a href="http://brew.sh/">homebrew</a></span>.</p><ol><li><p>Přejděte do adresáře Tomcatu v&nbsp;<span class="box"><span class="code">/usr/<span style="color: #008000; ">local</span>/Cellar/tomcat<span style="color: #666666; ">/&lt;</span><span style="color: #008000; ">version</span><span style="color: #666666; ">&gt;/</span>libexec/bin<span style="color: #666666; ">/</span></span></span>.</p></li><li><p>Vytvořte zde soubor <span class="box"><span class="code">setenv.sh</span></span> s&nbsp;následujícím obsahem:</p><div class="box"><div class="code"><span style="color: #19177C; ">JAVA_OPTS</span><span style="color: #666666; ">=</span><span style="font-weight: bold; color: #008000; ">${</span><span style="color: #19177C; ">JAVA_OPTS</span><span style="font-weight: bold; color: #008000; ">}</span> -Djavax.net.ssl.trustStore<span style="color: #666666; ">=</span>/path/to/truststore</div></div></li><li><p>Změny uložte a restartujte Tomcat.</p></li></ol><h3 id="HTomcatnaWindows-232"><span>Tomcat na Windows</span></h3><p>Spouštíte-li Tomcat přímo, pomocí skriptu <span class="box"><span class="code">startup.bat</span></span>, proveďte následující kroky.</p><ol><li><p>Přejděte do domovského adresáře vaší instalace Tomcatu.</p></li><li><p>Otevřete soubor <span class="box"><span class="code">bin<span style="color: #666666; ">/</span>setenv.bat</span></span> v&nbsp;textovém editoru.</p></li><li><p>Na konec výčtu argumentů za příkazem <span class="box"><span class="code">set</span></span> přidejte <span class="box"><span class="code"><span style="color: #666666; ">-</span>Djavax.net.ssl.trustStore<span style="color: #666666; ">=/</span>path<span style="color: #666666; ">/</span>to<span style="color: #666666; ">/</span>truststore</span></span> a změny uložte. Příslušná řádka vypadá např. takto:</p><div class="box"><div class="code"><span style="font-weight: bold; color: #008000; ">set</span> <span style="color: #BA2121; ">"JAVA_OPTS=%JAVA_OPTS% -Dfile.encoding=UTF8 -Dorg.apache.catalina.loader.WebappClassLoader.ENABLE_CLEAR_REFERENCES=false -XX:MaxPermSize=256m -Djavax.net.ssl.trustStore=/path/to/truststore"</span></div></div></li></ol><h3 id="HTomcatp159esIntelliJIDEA-232"><span>Tomcat přes IntelliJ IDEA</span></h3><p>Spouštíte-li Tomcat přes IntelliJ IDEA, proveďte následující kroky.</p><ol><li>Otevřete z&nbsp;hlavního menu <strong>Run → Edit Configurations…</strong> a následně pod <strong>Tomcat Server</strong> vyberte konkrétní instanci.</li><li>Do pole <strong>VM options</strong> přidejte: <span class="box"><span class="code"><span style="color: #666666; ">-</span>Djavax.net.ssl.trustStore<span style="color: #666666; ">=/</span>path<span style="color: #666666; ">/</span>to<span style="color: #666666; ">/</span>truststore</span></span> a potvrďte změny.</li><li>Máte-li Tomcat přes IDEA zrovna spuštěný, zastavte ho a znovu spusťte.</li></ol><h2 id="HVFDvojovE9serveryRozvoje-232"><span>Vývojové servery Rozvoje</span></h2><p>Všechny <strong>vývojové/testovací</strong> instance aplikací provozovaných Oddělením pro rozvoj mají certifikáty podepsané kořenovým certifikátem „Valkyrie CA“ (<span class="wikiexternallink"><a href="http://repository.fit.cvut.cz/files/valkyrie-ca.pem">PEM</a></span>). Jedná se o naši <em>self-signed</em> CA, není tedy podepsaná žádnou důvěryhodnou CA. Pracujete-li s vývojovými/testovacími instancemi, tak stačí, když si mezi důvěryhodné certifikáty přidáte pouze tento kořenový (pro Javu viz postup výše).</p>
</div>


    <div class="clearfloats"></div>
  </div>      <div id="xdocFooter">
  
       <div class="doc-tags" id="xdocTags">
        Tags:
            <span class="tag-wrapper"><span class="tag"><a href="https://rozvoj.fit.cvut.cz/Main/Tags?do=viewTag&amp;tag=Java">Java</a></span></span>
            <span class="tag-wrapper"><span class="tag"><a href="https://rozvoj.fit.cvut.cz/Main/Tags?do=viewTag&amp;tag=n%C3%A1vod">návod</a></span></span>
        </div>
  
  <div id="xdocAuthors">
    <div class="xdocCreation">       Created by <span class="wikilink"><a href="https://rozvoj.fit.cvut.cz/XWiki/jirutjak">Jakub Jirůtka</a></span> on 2013-11-07, 20:01<br>
          </div>
  </div>
</div>
<div id="xwikidata" class="layoutsubsection">
      
    
                    
    
    
    
                          <div id="docextraanchors" class="invisible">
<span id="Commentsanchor">&nbsp;</span><span id="Annotationsanchor">&nbsp;</span><span id="Attachmentsanchor">&nbsp;</span><span id="Historyanchor">&nbsp;</span><span id="Informationanchor">&nbsp;</span></div>
  <div id="xwikidatacontents">
    <div class="floatcontainer" id="docExtraTabs">
      <ul class="xwikitabbar" id="docExtrasTabsUl">
                  <li id="Commentstab" class="active">
            <a id="Commentslink" href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave#Comments">
              Comments  <span class="itemCount">(0)</span>             </a>
          </li>
                  <li id="Annotationstab">
            <a id="Annotationslink" href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave#Annotations">
              Annotations  <span class="itemCount">(0)</span>             </a>
          </li>
                  <li id="Attachmentstab">
            <a id="Attachmentslink" href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave#Attachments">
              Attachments  <span class="itemCount">(0)</span>             </a>
          </li>
                  <li id="Historytab">
            <a id="Historylink" href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave#History">
              History             </a>
          </li>
                  <li id="Informationtab">
            <a id="Informationlink" href="https://rozvoj.fit.cvut.cz/Main/problemy-s-certifikaty-v-jave#Information">
              Information             </a>
          </li>
              </ul>
    </div>
                <div id="docextrapanes" class="">
              <div id="Commentspane" class=""><div id="commentscontent" class="xwikiintracontent">
  <div id="_comments">
  <p class="noitems">No comments for this document</p>
      </div> </div></div>
              <div id="Annotationspane" class="hidden empty"></div>
              <div id="Attachmentspane" class="hidden empty"></div>
              <div id="Historypane" class="hidden empty"></div>
              <div id="Informationpane" class="hidden empty"></div>
          </div>
                <script type="text/javascript">
      var hashviewer = self.document.location.hash.substring(1);
                                                var extraInit = function(){ XWiki.displayDocExtra("Comments", "commentsinline.vm", false) };
                if (hashviewer == "Comments") {
          var extraInit = function(){ XWiki.displayDocExtra("Comments", "commentsinline.vm", true) };
        }
                                if ($("Commentslink") != null) {
          $("Commentslink").href="#Comments";
          Event.observe($("Commentslink"), "click", function(){ XWiki.displayDocExtra("Comments", "commentsinline.vm", false); }, false);
        }
                                if ($("tmShowComments") != null) {
          $("tmShowComments").href="#Comments";
          Event.observe($("tmShowComments"), "click", function(){ XWiki.displayDocExtra("Comments", "commentsinline.vm", true); }, false);
        }
                                if ($("commentsshortcut") != null) {
          $("commentsshortcut").down('a').href="#comments";
          Event.observe($("commentsshortcut"), "click", function(){ XWiki.displayDocExtra("Comments", "commentsinline.vm", true); }, false);
        }
                                                                              if (hashviewer == "Annotations") {
          var extraInit = function(){ XWiki.displayDocExtra("Annotations", "annotationsinline.vm", true) };
        }
                                if ($("Annotationslink") != null) {
          $("Annotationslink").href="#Annotations";
          Event.observe($("Annotationslink"), "click", function(){ XWiki.displayDocExtra("Annotations", "annotationsinline.vm", false); }, false);
        }
                                if ($("tmShowAnnotations") != null) {
          $("tmShowAnnotations").href="#Annotations";
          Event.observe($("tmShowAnnotations"), "click", function(){ XWiki.displayDocExtra("Annotations", "annotationsinline.vm", true); }, false);
        }
                                if ($("annotationsshortcut") != null) {
          $("annotationsshortcut").down('a').href="#annotations";
          Event.observe($("annotationsshortcut"), "click", function(){ XWiki.displayDocExtra("Annotations", "annotationsinline.vm", true); }, false);
        }
                                                                              if (hashviewer == "Attachments") {
          var extraInit = function(){ XWiki.displayDocExtra("Attachments", "attachmentsinline.vm", true) };
        }
                                if ($("Attachmentslink") != null) {
          $("Attachmentslink").href="#Attachments";
          Event.observe($("Attachmentslink"), "click", function(){ XWiki.displayDocExtra("Attachments", "attachmentsinline.vm", false); }, false);
        }
                                if ($("tmShowAttachments") != null) {
          $("tmShowAttachments").href="#Attachments";
          Event.observe($("tmShowAttachments"), "click", function(){ XWiki.displayDocExtra("Attachments", "attachmentsinline.vm", true); }, false);
        }
                                if ($("attachmentsshortcut") != null) {
          $("attachmentsshortcut").down('a').href="#attachments";
          Event.observe($("attachmentsshortcut"), "click", function(){ XWiki.displayDocExtra("Attachments", "attachmentsinline.vm", true); }, false);
        }
                                                                              if (hashviewer == "History") {
          var extraInit = function(){ XWiki.displayDocExtra("History", "historyinline.vm", true) };
        }
                                if ($("Historylink") != null) {
          $("Historylink").href="#History";
          Event.observe($("Historylink"), "click", function(){ XWiki.displayDocExtra("History", "historyinline.vm", false); }, false);
        }
                                if ($("tmShowHistory") != null) {
          $("tmShowHistory").href="#History";
          Event.observe($("tmShowHistory"), "click", function(){ XWiki.displayDocExtra("History", "historyinline.vm", true); }, false);
        }
                                if ($("historyshortcut") != null) {
          $("historyshortcut").down('a').href="#history";
          Event.observe($("historyshortcut"), "click", function(){ XWiki.displayDocExtra("History", "historyinline.vm", true); }, false);
        }
                                                                              if (hashviewer == "Information") {
          var extraInit = function(){ XWiki.displayDocExtra("Information", "informationinline.vm", true) };
        }
                                if ($("Informationlink") != null) {
          $("Informationlink").href="#Information";
          Event.observe($("Informationlink"), "click", function(){ XWiki.displayDocExtra("Information", "informationinline.vm", false); }, false);
        }
                                if ($("tmShowInformation") != null) {
          $("tmShowInformation").href="#Information";
          Event.observe($("tmShowInformation"), "click", function(){ XWiki.displayDocExtra("Information", "informationinline.vm", true); }, false);
        }
                                if ($("informationshortcut") != null) {
          $("informationshortcut").down('a').href="#information";
          Event.observe($("informationshortcut"), "click", function(){ XWiki.displayDocExtra("Information", "informationinline.vm", true); }, false);
        }
                                            document.observe("dom:loaded", extraInit, false);
    </script>
  </div> </div>  
    </div>      </div><div id="leftPanels" class="panels left">
      <div class="panel expanded QuickLinks"><h1 class="xwikipaneltitle">Quick Links</h1><div class="xwikipanelcontents"><p><span class="wikilink"><a href="https://rozvoj.fit.cvut.cz/Main/WebHome">Hlavní stránka</a></span></p><p><span class="wikilink"><a href="https://rozvoj.fit.cvut.cz/Projekty/WebHome"><span class="wikigeneratedlinkcontent">Projekty</span></a></span></p><p><span class="wikilink"><a href="https://rozvoj.fit.cvut.cz/Sandbox/WebHome">Sandbox</a></span></p><span class="jmp-activator">Jump to any page in the wiki (Meta+G)</span></div></div>
        
        
        <div class="panel expanded MyRecentModifications"><h1 class="xwikipaneltitle">My Recent Modifications</h1><div class="xwikipanelcontents"><ul><li><a href="https://rozvoj.fit.cvut.cz/XWiki/FIT-Zamestnanci">FIT-Zamestnanci</a></li><li><a href="https://rozvoj.fit.cvut.cz/XWiki/Students">Students</a></li></ul></div></div>
  </div>

  </div>
<div class="clearfloats"></div>
  </div></div><div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr>
  <div id="xwikilicence">This wiki is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons BY-SA 3.0</a> license</div>
          <div id="xwikiplatformversion">XWiki Enterprise 5.4.1 - <a onclick="openURL(&#39;http://enterprise.xwiki.org/xwiki/bin/view/Main/Documentation&#39;, &#39;_blank&#39;); return false;" href="http://www.xwiki.org/xwiki/bin/view/Main/Documentation">Documentation</a></div>
<hr>
</div>

</div></div>
</body></html>